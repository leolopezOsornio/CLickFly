"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8618],{8618:(T,R,a)=>{a.r(R),a.d(R,{RegisterPageModule:()=>j});var h=a(177),f=a(4341),l=a(4742),F=a(786),m=a(467),u=a(4262),e=a(4438),C=a(3656),w=a(4303);function b(t,o){1&t&&(e.j41(0,"p",14),e.EFF(1,"Correo inv\xe1lido"),e.k0s())}function v(t,o){1&t&&(e.j41(0,"p",14),e.EFF(1,"El usuario no puede contener espacios"),e.k0s())}function y(t,o){1&t&&(e.j41(0,"p",14),e.EFF(1," La contrase\xf1a debe contener al menos 8 caracteres, una may\xfascula, una min\xfascula, un n\xfamero y un car\xe1cter especial. "),e.k0s())}function k(t,o){1&t&&(e.j41(0,"p",14),e.EFF(1," Las contrase\xf1as no coinciden "),e.k0s())}const E=[{path:"",component:(()=>{var t;class o{constructor(r,n,s,i,c){this.navCtrl=r,this.alertController=n,this.firestore=s,this.authService=i,this.loadingController=c,this.email="",this.fullName="",this.username="",this.password="",this.confirmPassword="",this.formValid=!1,this.emailValid=!0,this.passwordsMatch=!0,this.passwordValid=!0,this.usernameValid=!0,this.isLargeScreen=!1,this.showPassword=!1,this.acceptPolicies=!1,this.isLargeScreen=window.innerWidth>=765}updateScreenSize(){this.isLargeScreen=window.innerWidth>=765}validateForm(){this.emailValid=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email),this.usernameValid=!this.username.includes(" "),this.passwordsMatch=this.password===this.confirmPassword,this.formValid=this.emailValid&&""!==this.email.trim()&&""!==this.fullName.trim()&&this.usernameValid&&""!==this.username.trim()&&""!==this.password.trim()&&this.passwordValid&&this.passwordsMatch}validatePassword(){this.passwordValid=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(this.password),this.validateForm()}formatFullName(){this.validateForm()}removeSpaces(){this.username=this.username.replace(/\s/g,""),this.validateForm()}checkIfUserExists(){var r=this;return(0,m.A)(function*(){const n=(0,u.rJ)(r.firestore,"users"),s=(0,u.P)(n,(0,u._M)("email","==",r.email)),i=(0,u.P)(n,(0,u._M)("username","==",r.username)),c=yield(0,u.GG)(s),_=yield(0,u.GG)(i);return c.empty?_.empty?null:"El nombre de usuario ya est\xe1 registrado":"El email ya est\xe1 registrado"})()}registerUser(){var r=this;return(0,m.A)(function*(){if(!r.formValid)return;const n=yield r.loadingController.create({message:"Registrando...",spinner:"crescent"});yield n.present();try{r.authService.register(r.email,r.fullName,r.username,r.password).subscribe({next:(P=(0,m.A)(function*(d){yield n.dismiss(),r.authService.showAlert("\u2705 Bienvenido","Tu registro ha sido exitoso"),r.navCtrl.navigateBack("/home")}),function(p){return P.apply(this,arguments)}),error:function(){var P=(0,m.A)(function*(d){var p;yield n.dismiss();let M="\u274c Error desconocido. Int\xe9ntalo nuevamente.";null!==(p=d.error)&&void 0!==p&&p.message&&(M=d.error.message),r.authService.showAlert("Ups! Algo sali\xf3 mal",M),console.log(d)});return function(p){return P.apply(this,arguments)}}()})}catch(s){yield n.dismiss(),console.error("Error al registrar usuario en Firestore:",s),yield(yield r.alertController.create({header:"Error",message:"Hubo un problema al registrar el usuario. Int\xe9ntalo de nuevo.",buttons:["OK"]})).present()}var P})()}}return(t=o).\u0275fac=function(r){return new(r||t)(e.rXU(C.q9),e.rXU(l.hG),e.rXU(u._7),e.rXU(w.u),e.rXU(l.Xi))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-register"]],hostBindings:function(r,n){1&r&&e.bIt("resize",function(i){return n.updateScreenSize(i)},!1,e.tSv)},standalone:!1,decls:47,vars:16,consts:[[3,"fullscreen"],["id","register-container",3,"ngClass"],[1,"scroll-container"],["position","stacked"],["type","email","placeholder","ejemplo@correo.com",3,"ngModelChange","input","ngModel"],["class","error-msg",4,"ngIf"],["type","text","placeholder","Juan P\xe9rez",3,"ngModelChange","input","ngModel"],["type","text","placeholder","Usuario123",3,"ngModelChange","input","ngModel"],["placeholder","********",3,"ngModelChange","input","type","ngModel"],[3,"ngModelChange","ngModel"],[3,"ngModelChange","ionChange","ngModel"],["href","/politicas"],["expand","full",3,"click","disabled"],["expand","full","fill","clear",1,"register-btn",3,"click"],[1,"error-msg"]],template:function(r,n){1&r&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"strong"),e.EFF(3,"Registro de Usuario"),e.k0s(),e.j41(4,"div",2)(5,"ion-item")(6,"ion-label",3),e.EFF(7,"Correo Electr\xf3nico"),e.k0s(),e.j41(8,"ion-input",4),e.mxI("ngModelChange",function(i){return e.DH7(n.email,i)||(n.email=i),i}),e.bIt("input",function(){return n.validateForm()}),e.k0s()(),e.DNE(9,b,2,0,"p",5),e.j41(10,"ion-item")(11,"ion-label",3),e.EFF(12,"Nombre Completo"),e.k0s(),e.j41(13,"ion-input",6),e.mxI("ngModelChange",function(i){return e.DH7(n.fullName,i)||(n.fullName=i),i}),e.bIt("input",function(){return n.formatFullName()}),e.k0s()(),e.j41(14,"ion-item")(15,"ion-label",3),e.EFF(16,"Usuario"),e.k0s(),e.j41(17,"ion-input",7),e.mxI("ngModelChange",function(i){return e.DH7(n.username,i)||(n.username=i),i}),e.bIt("input",function(){return n.removeSpaces()})("input",function(){return n.validateForm()}),e.k0s()(),e.DNE(18,v,2,0,"p",5),e.j41(19,"ion-item")(20,"ion-label",3),e.EFF(21,"Contrase\xf1a"),e.k0s(),e.j41(22,"ion-input",8),e.mxI("ngModelChange",function(i){return e.DH7(n.password,i)||(n.password=i),i}),e.bIt("input",function(){return n.validatePassword()}),e.k0s()(),e.DNE(23,y,2,0,"p",5),e.j41(24,"ion-item")(25,"ion-label",3),e.EFF(26,"Confirmar Contrase\xf1a"),e.k0s(),e.j41(27,"ion-input",8),e.mxI("ngModelChange",function(i){return e.DH7(n.confirmPassword,i)||(n.confirmPassword=i),i}),e.bIt("input",function(){return n.validateForm()}),e.k0s()(),e.DNE(28,k,2,0,"p",5),e.j41(29,"ion-item")(30,"ion-label"),e.EFF(31,"Mostrar Contrase\xf1as"),e.k0s(),e.j41(32,"ion-checkbox",9),e.mxI("ngModelChange",function(i){return e.DH7(n.showPassword,i)||(n.showPassword=i),i}),e.k0s()(),e.j41(33,"ion-item")(34,"ion-label")(35,"ion-checkbox",10),e.mxI("ngModelChange",function(i){return e.DH7(n.acceptPolicies,i)||(n.acceptPolicies=i),i}),e.bIt("ionChange",function(){return n.validateForm()}),e.k0s(),e.EFF(36," Acepto las "),e.j41(37,"a",11),e.EFF(38,"pol\xedticas de privacidad"),e.k0s(),e.EFF(39," y los "),e.j41(40,"a",11),e.EFF(41,"t\xe9rminos y condiciones"),e.k0s(),e.EFF(42,". "),e.k0s()(),e.j41(43,"ion-button",12),e.bIt("click",function(){return n.registerUser()}),e.EFF(44,"Registrarse"),e.k0s(),e.j41(45,"ion-button",13),e.bIt("click",function(){return n.navCtrl.navigateBack("/home")}),e.EFF(46," \xbfYa tienes cuenta? Iniciar sesi\xf3n "),e.k0s()()()()),2&r&&(e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("ngClass",n.isLargeScreen?"":"espacio_css"),e.R7$(7),e.R50("ngModel",n.email),e.R7$(),e.Y8G("ngIf",!n.emailValid&&n.email.length>0),e.R7$(4),e.R50("ngModel",n.fullName),e.R7$(4),e.R50("ngModel",n.username),e.R7$(),e.Y8G("ngIf",n.username.includes(" ")),e.R7$(4),e.Y8G("type",n.showPassword?"text":"password"),e.R50("ngModel",n.password),e.R7$(),e.Y8G("ngIf",!n.passwordValid&&n.password.length>0),e.R7$(4),e.Y8G("type",n.showPassword?"text":"password"),e.R50("ngModel",n.confirmPassword),e.R7$(),e.Y8G("ngIf",n.password&&n.confirmPassword&&n.password!==n.confirmPassword),e.R7$(4),e.R50("ngModel",n.showPassword),e.R7$(3),e.R50("ngModel",n.acceptPolicies),e.R7$(8),e.Y8G("disabled",!n.formValid||!n.acceptPolicies))},dependencies:[h.YU,h.bT,f.BC,f.vS,l.Jm,l.eY,l.W9,l.$w,l.uz,l.he,l.hB,l.Gw],styles:['@charset "UTF-8";#register-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto;padding:20px;border-radius:16px;background:#f9f9f900;box-shadow:0 4px 8px #0000;max-height:900px;overflow:hidden;display:flex;flex-direction:column;box-sizing:border-box}.scroll-container[_ngcontent-%COMP%]{overflow-y:auto;max-height:800px;padding-right:10px;scrollbar-width:none;-ms-overflow-style:none}.scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}strong[_ngcontent-%COMP%]{font-size:24px;color:#333;margin-bottom:15px;display:block}ion-item[_ngcontent-%COMP%]{margin-bottom:10px}ion-input[_ngcontent-%COMP%]{--color: #333;--border-radius: 8px;padding:10px}ion-button[_ngcontent-%COMP%]{--background: #61c81a;--background-hover: #61c81a;--color: #fff;border-radius:8px;padding:12px 24px;font-size:16px;width:100%}ion-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.register-btn[_ngcontent-%COMP%]{width:100%;margin-top:10px;text-align:center}.error-msg[_ngcontent-%COMP%]{color:red;font-size:14px;text-align:left;margin-left:15px}ion-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.espacio_cssdx[_ngcontent-%COMP%]{margin-top:2rem!important}']}),o})()}];let I=(()=>{var t;class o{}return(t=o).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[F.iI.forChild(E),F.iI]}),o})(),j=(()=>{var t;class o{}return(t=o).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[h.MD,f.YN,l.bv,I]}),o})()}}]);